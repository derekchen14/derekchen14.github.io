<!DOCTYPE html>
<!--
    Type on Strap jekyll theme v2.3.1
    Copyright 2016-2020 Sylhare
    Theme free for personal and commercial use under the MIT license
    https://github.com/sylhare/Type-on-Strap/blob/master/LICENSE
-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- Main JS (navbar.js, katex_init.js and masonry_init.js)-->
    <script defer src="/docs/assets/js/main.min.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="/docs/assets/css/main.css">

    <!--Favicon-->
    <link rel="shortcut icon" href="/docs/assets/favicon.ico" type="image/x-icon">

    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="More Than One Turn" href="https://morethanoneturn.com/docs/feed.xml"/>
    
    

    <!-- KaTeX 0.12.0 -->
    
    <script defer src="/docs/assets/js/vendor/katex.min.js"></script>
    <script defer src="/docs/assets/js/vendor/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
    

    <!-- Mermaid 8.8.2 -->
    
    <!-- <script src=”https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.8.2/mermaid.min.js" onload="mermaid.initialize({startOnLoad:true});"></script> -->
    <script defer src="/docs/assets/js/vendor/mermaid.min.js" onload="mermaid.initialize({startOnLoad:true});"></script>
    

    <!-- Simple-Jekyll-Search 1.17.12 -->
    <script src="/docs/assets/js/vendor/simple-jekyll-search.min.js" type="text/javascript"></script>

    <!-- Google Analytics / Cookie Consent -->
    <script>
      const cookieName = 'cookie-notice-dismissed-https://morethanoneturn.com';
      const isCookieConsent = 'false';
      const analyticsName = '';
    </script>

    
    

    <!-- seo tags -->
    <meta property="og:image" content="https://morethanoneturn.com/docs/assets/img/pexels/triangular.jpeg">
    
    <meta property="og:type" content="website" />
    
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Dialog State Tracking Models | More Than One Turn</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Dialog State Tracking Models" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Thoughts on some of the latest and greatest as of mid-2018." />
<meta property="og:description" content="Thoughts on some of the latest and greatest as of mid-2018." />
<link rel="canonical" href="https://morethanoneturn.com/docs/2018/06/16/dialog-state-tracking-models.html" />
<meta property="og:url" content="https://morethanoneturn.com/docs/2018/06/16/dialog-state-tracking-models.html" />
<meta property="og:site_name" content="More Than One Turn" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-06-16T21:41:16-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Dialog State Tracking Models" />
<script type="application/ld+json">
{"description":"Thoughts on some of the latest and greatest as of mid-2018.","headline":"Dialog State Tracking Models","dateModified":"2018-06-16T21:41:16-04:00","datePublished":"2018-06-16T21:41:16-04:00","url":"https://morethanoneturn.com/docs/2018/06/16/dialog-state-tracking-models.html","mainEntityOfPage":{"@type":"WebPage","@id":"https://morethanoneturn.com/docs/2018/06/16/dialog-state-tracking-models.html"},"@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <!-- RSS -->
    <link type="application/atom+xml" rel="alternate" href="https://morethanoneturn.com/docs/feed.xml" title="More Than One Turn" />

    <!-- Twitter Cards -->
    <meta name="twitter:title" content="Dialog State Tracking Models">
    <meta name="twitter:description" content="Thoughts on some of the latest and greatest as of mid-2018.1) Towards E2E RL of Dialogue Agents for Information aka. KB-Infobot (Dhingra et al.)    a. Proces...">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://morethanoneturn.com/docs/assets/img/pexels/triangular.jpeg">
    <meta name="twitter:image:alt" content="Dialog State Tracking Models">
</head>

  <body>
    <header class="site-header">

    <!-- Logo and title -->
	<div class="branding">
        
		<a href="/docs/">
			<img alt="logo img" class="avatar" src="/docs/assets/img/triangle.png" />
		</a>
        
        <a class="site-title" aria-label="More Than One Turn" href="/docs/">
        More Than One Turn
		</a>
	</div>

    <!-- Toggle menu -->
    <nav class="clear">
    <a aria-label="pull" id="pull" class="toggle" href="#">
    <i class="fa fa-bars fa-lg"></i>
    </a>

    <!-- Menu -->
    <ul class="hide">
        

        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="About" title="About" href="/docs/about/">
                     About 
                </a>
            </li>
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Gallery" title="Gallery" href="/docs/gallery/">
                     Gallery 
                </a>
            </li>
            
            
        
            
            
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Portfolio" title="Portfolio" href="/docs/portfolio/">
                     Portfolio 
                </a>
            </li>
            
            
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Search" title="Search" href="/docs/search/">
                     <i class="fa fa-search" aria-hidden="true"></i>
                    
                </a>
            </li>
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Tags" title="Tags" href="/docs/tags/">
                     <i class="fa fa-tags" aria-hidden="true"></i>
                    
                </a>
            </li>
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
    </ul>

	</nav>
</header>

    <div class="content">
      <article >
  <header id="main" style="">
    <div class="title-padder">
      
      <h1 id="Dialog+State+Tracking+Models" class="title">Dialog State Tracking Models</h1>
      


<div class="post-info">
    <p class="meta">
      June 16, 2018
    </p></div>

      
    </div>
  </header>

  <section class="post-content">
  
      <p>Thoughts on some of the latest and greatest as of mid-2018.</p>

<p>1) <a href="https://arxiv.org/abs/1609.00777">Towards E2E RL of Dialogue Agents for Information</a> <em>aka. KB-Infobot</em> (Dhingra et al.)
    a. <strong>Process:</strong> Follows the format of many traditional DST systems.  In particular, this includes a belief tracker, policy manager, database operator and text generator. This paper focuses on the database querying portion by introducing a soft KB-lookup mechanism that selects items across a probability distribution rather than a hard KB-lookup which is non-differentiable.
    It assumes access to a domain-specific entity-centric knowledge base (EC-KB) where all items are split intro triples of (h,r,t) which stands for head, relation, tail.  This is very similar to querying based on Key-Value Pair as in <a href="https://arxiv.org/abs/1705.05414">Key-Value Retrieval Networks for Task-Oriented Dialogue</a>.<br />
    The belief state is the set of all <em>p</em> and <em>q</em> outputs.  P is a multinomial distribution over the slot values <em>v</em>  (and thus are vectors of size V), and each Q is a scalar probability of the user knowing the value of slot <em>j</em>. Each slot is summarized into an entropy statistic over a distribution, with final size 2M + 1, where the first M is the summary of all previous <em>p</em>, M is all the <em>q</em> values (which are unchanged since they are already scalar), and 1 is the summary of the current <em>p</em> distribution.
    b. <strong>Strengths:</strong> Good job in building out the system from end-to-end, with different experiments comapred to handcrafted systems.  They also test across different KB sizes.
    c. <strong>Weaknesses:</strong> Final performance is not yet exciting with only 66% success rate for small KBs.  They also achieve 83%, 83% and 68% for medium, large and extra large KBs respectively, which looks better but it is odd we don’t see consistent trends, but rather a bump in the middle.
    d. <strong>Notes:</strong> Easy to criticize (ie. multiple networks used for belief tracking), but to be fair, that is not the goal of their paper.  As far as database operation is concerned, this is a great contribution!</p>

<p>2) <a href="https://arxiv.org/abs/1703.01008">E2E Task-Completion Neural Dialogue Systems</a> with a novel <a href="https://arxiv.org/abs/1612.05688">User Simulator</a> (Li et al.)
    a. <strong>Process:</strong> Lays down a full framework for end-to-end dialogue. The first half is a user simulator that starts by randomly generating an agenda, and then uses a NLG module to translate that into natural language.  The agenda explicitly outlines a user’s goal, like which movie they want to watch and what requirements they have (i.e. at 3PM, about comedy), so the user model behaves in a consistent, goal-oriented manner. Separately, this concept is extended further in <a href="https://arxiv.org/abs/1801.04871">Building a Conversational Agent Overnight with Dialogue Self-Play</a> where the authors (a) add the ability of varying user personality through a temperature mechanism and (b) greatly expand the diversity of the user dialogue by introducing Turkers paraphrasing the original text to inject human-likeness.
    The second half of the framework is actual dialogue agent which includes an language understanding module to parse utterances into a semantic frame.  This is then passed into the state tracker which accumulates the semantics from each utterance, and policy learner for generating the next system action.  It is assumed that the output of the dialogue agent is simply the next action, rather than natural text, which is acceptable because the “user” is actually the simulator which operates under the assumption it is able to perfectly understand the agent.
    b. <strong>Strengths:</strong>  The other major contribution is a method of gathering data with a User Simulator so that there are enough examples for training an RL agent. By tweaking the parameters of the simulator, the auuthors are able to show that slot-level errors have a greater impact on the system performance than intent-level ones, and that slot value replacement degrades the performance most.
    To understand what this means, let’s start by defining the possible intent-level errors:
     - <em>Within Group Error</em>: noise is from the same group of the real intent, where groups are either (a) inform intents (b) request intents or (c) other intents.  For example, the real intent is <code class="language-plaintext highlighter-rouge">request_theater</code>, which calls into the request group, but the predicted intent from LU module might be <code class="language-plaintext highlighter-rouge">request_moviename</code>.
     - <em>Between Group Error</em>: noise is from the different group. For example, a real intent <code class="language-plaintext highlighter-rouge">request_moviename</code> might be predicted as the intent <code class="language-plaintext highlighter-rouge">inform_moviename</code>.
     - <em>Random Error</em>: any mixture of the two above</p>

<p>Similarly, let’s also define the possible slot-level errors:
     - <em>Slot Deletion</em>: slot is not recognized by the LU module
     - <em>Incorrect Slot Value</em>: slot name is correctly recognized, but the slot value is wrong
     - <em>Incorrect Slot</em>: both the slot and its value are incorrectly recognized
     - <em>Random Error</em>: any mixture of the three above
    Then the conclusion is that “Incorrect Slot Value” causes the biggest performance drop of all options.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>c. **Weaknesses:** While the idea sounds promising, the RL agents were asked to explore a limited number of dialogue acts. Looking at actual dialogues, it feels like the entire system can be solved using a competent rule-based system.
d. **Notes:** The framework itself and the results are not particularly interesting, but the many experiments analyzing model succeess are quite insightful.  They find predicting the wrong intent or slot is recoverable, but choosing the wrong value is not.  This actually makes a lot of intuitive sense because if as a listener, you recieve a mismatched signal (intent implies one thing, but slot-value pair imply another), you ask for clarification.  However, if you only get a wrong value, then you actually think you're correct, so you never bother to inquire further!
</code></pre></div></div>

<p>3) <a href="https://arxiv.org/abs/1604.04562">Network-based E2E Trainable Task-oriented Dialogue System</a> (Wen et al.)
    a. <strong>Process:</strong> Generally follows traditional DST framework and includes five main components:
    - <em>Intent Detection</em>: maps parsed utterance into user-defined intents using LSTM, output is a hidden state vector
    - <em>Belief Tracker</em>: maps parsed utterance (and previously predicted beliefs) into a distribution of beliefs for current timestep.  This consists of a <strong>different tracker for every possible slot</strong>. There is also a distinction between inform slots (food type, area, price range) vs. request slots (address, phone number).  A CNN is used to extract features, along with n-gram embeddings surrounding the delexicalized keywords.  The key slots and values are “special”, so they get their part of the embedding.
    - <em>Database Operator</em>: takes in probability distribution of slots to calculate a binary truth vector that is 1 if the value is predicted to be important and 0 otherwise.  Rules are written to make sure that a value is 1, only if that value is compatible with the query. For example, if the query is “food type”, then values like “Japanese” and “Indian” are allowed, but values like “3-star rating” and “expensive” are not allowed.
    - <em>Policy Management</em>: maps slot probability distribution, database entities, and intent hidden vector into agent actions.  This part makes very little sense because it seems to be trained as a linear transform with SGD, rather than a reinforcement learning module.  The output is a single vector <em>o</em>, but seems to be in a vector format with no interpretable meaning, as an actual action.  Most critically, there is little justification for why the policy manager has the structure that it does.
    - <em>Text Generation</em>: uses an LSTM to generate words one-by-one until EOS.  (Can be replaced by a retrieval model for more human-like, but less generalizable responses).  Then fills in the slots based on return values of the database entity pointer.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>b. **Strengths**: This paper is among the first to develop an end-to-end neural system within the traditional DST framework.  In doing so, they strike a good balance between imposing too much structure (ie. rule-based systems of the past) and not enough structure (ie. pure neural models). Also proposes a new way of collecting dialogue data based on a Wizard-of-Oz framework.

c. **Weaknesses**: Despite new dataset, the topic is still restaurant booking, so its really not that novel.  Also, the method is just having person A (acting as the agent) label person B's utterance (acting as the customer) while also providing the agent output.  This just sounds like a lot of work (and room for error) on the part of Person A.
Different belief trackers for each slot mean lots of data is needed.  Does not allow room for agent to confirm any ambiguity.  Slots are hard to identify when creating training data (and thus hard to delexicalize) which means placing a lot of confidence in the Turker to get it right. Not sure how this would perform with ambiguities found in real world data. Would have really liked to see how well the belief tracker module alone compares to hand-crafted lexicon.

d. **Notes**: Not sure why belief tracking (ie. semantic parsing into slot-value pairs) needs to be distinguished from intent detection.  Feels like two separate networks are trained when they should be combined for weight sharing purposes.
 Overall, data collection method is improved, but the lack of data issue remains largely unresolved.  Also, the architecture seems overly complicated, and finally, attention helps, as always.
</code></pre></div></div>

<p><img src="/content/images/2018/06/wen_e2e.png" alt="wen_e2e" /></p>

<p>4) <a href="https://arxiv.org/abs/1606.03777">Neural Belief Tracker</a> (Mrkšić et al.)
    a. <strong>Process:</strong> Encodes three inputs using either a deep NN or a convolutional NN.  It is a bit odd that an LSTM is not considered:
     - Agent Utterance (ie. System Ouput) - the previous sentence, spoken by the agent.
     - User Utterance: the current sentence, spoken by the user.
     - Candidate Pairs: a list of all possible slot-value pairs, either inform (food type, area, price range) or request (address, phone number)
    These 3 items are then passed into another layer:
     - Semantic Decoding: calculates a similarity score between the user utterance and the candidate pair.  Checks is the user explicitly offered/requested a specific piece of information that turn.
     - Context Modeling: uses the interaction between agent utterance and candidate pair to decide if (a) system request or (b) system confirm occured.  If the candidate pair passes this gating portion, then another similarity score is calculated to determine the impact of the user’s answer.
         - System request: “What price range would you like?”, then area and food are not relevant.
         - System confirm: “How about Turkish food?”, then any user response is referring to food type, and not price range or area.
    Finally, these two outputs are mashed together in a final network to calculate the binary (yes/no) decision about whether this candidate-pair occurred in the current timestep.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>b. **Strengths**: Delexicalization is a process where "slots and values mentioned in the text are replaced with generic labels."  However, this introduces a hidden dependency of identifying slot/value mentions in text.  The authors then hit the nail on the head when they state "For toy domains, one can manually construct semantic dictionaries which list the potential rephrasings for all slot value pairs ... although, this will not scale to the rich variety of user language or to general domains." User utterances are unlabeled in real world scenarios, so slot-filling becomes impossible since we don't know which slots exist, much less which values belong to them.  The solution proposed is to use dense vectors embeddings which encode meaning, and thus have a sense of semantic similarity baked in.
c. **Weaknesses**: Only uses n-grams, rather than full sentence encoding.  Does not use attention or other means of long-term tracking.  Makes Markovian assumption about influence of previous system dialogue acts.  Does not report final impact on task completion rate, only performs intrinsic evaluation on belief tracking.
d. **Note**: This paper only deals with the belief tracking component, so evaluation is performed on predicting inform-slots and request-slots, ignoring policy manangement and dialog generation.
While GloVE performed admirably, a different set of vectors Paragram-SL999 actually did best, since these embeddings are trained on paraphrases and are specifically optimized for semantic similarity, as opposed to GloVE or Word2vec which are optimized for window-context similarity.  The latter maps antonyms to similar vector spaces since the words are highly related, despite the opposing semantics.
</code></pre></div></div>

<p><img src="/content/images/2018/06/nbt_model.png" alt="nbt_model" /></p>

<p>5) <a href="https://arxiv.org/abs/1805.09655">Global-Locally Self-Attentive Dialogue State Tracker</a> (Zhong, Xiong, Socher)
    a. <strong>Process:</strong> Past DST models perform poorly when predicting on rare slot-value pairs since each slot requires its own tracker.  Thus, this paper uses global modules to share parameters between estimators for each slot and local modules to learn slot-specific feature representations.  The overall process is <em>very</em> similar to the NBT model above, where both include encoders for agent utterance, user utterance, and candidate slot-value pairs.  Both also produce a similarity score based on user text (semantic decoder) and based on agent’s utterance (context decoder), which are then fed into a final binary-decision mixture model.  The key differences are
    - <em>Global-Local Encoding</em>: rather than using a deep neural network or CNN, the three encoders operate with a two step LSTM/attention process. In more detail, given the input of a tokenized utterance <em>X</em>, the encoder performs a mapping of f(X) -&gt; H, c where <em>H</em> which is the result of a BiLSTM encoder and <em>c</em> is the result of a self-attention on the encoding.
    - <em>Mixture model</em>: What makes this unit special is that rather than just one encoder with attention, as typically found in <a href="https://arxiv.org/abs/1605.07683">Learning End-to-End Goal-Oriented Dialog</a>, the encoder operates on two levels.  Namely, there is one encoder for the global level where the weights are shared across slots, and an encoder for the local level, where the weights are retrained for each slot.  The results of these two encoders are then combined in an interpolation mechanism where the mixture strength, beta, is a hyperparameter to be tuned on the dev set.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>b. **Strengths**: The model takes into account global context so that weights can be shared across different slots. Uses an RNN as the encoder which makes sense.
c. **Weaknesses**: No clear explanation of where proposed slot-value pairs come from. I think the assumption is that the model cycles through all possible pairs.
d. **Notes**: Would be interesting to encode with hierarchical encoders and to also see how the model performs on extrinsic measures.  Given the resources of the group, it would have been nice for them to release a new dataset. ![GLAD_model](/content/images/2018/06/GLAD_model.png)
</code></pre></div></div>

    
  </section>

  <!-- Social media shares -->
  

<div class="share-buttons">
    <ul class="share-buttons">
        <div class="meta">Share</div>
        
        <li>
            <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fmorethanoneturn.com%2Fdocs%2F2018%2F06%2F16%2Fdialog-state-tracking-models.html" target="_blank" title=" Facebook">
			<i class="fa fa-facebook-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Share on Facebook</span>
		</a>
        </li>
         
        <li>
            <a href="https://twitter.com/intent/tweet?text=Dialog+State+Tracking+Models%20https%3A%2F%2Fmorethanoneturn.com%2Fdocs%2F2018%2F06%2F16%2Fdialog-state-tracking-models.html" target="_blank" title="">
			<i class="fa fa-twitter-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Tweet</span>
		</a>
        </li>
            
        <li>
            <a href="http://www.reddit.com/submit?url=https://morethanoneturn.com/docs/2018/06/16/dialog-state-tracking-models.html&title=Dialog+State+Tracking+Models%20%7C%20More+Than+One+Turn" target="_blank" title=" Reddit">
			<i class="fa fa-reddit-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Share on Reddit</span>
		</a>
        </li>
           
        <li>
            <a href="mailto:?subject=Dialog+State+Tracking+Models%20%7C%20More+Than+One+Turn&body=:%20https://morethanoneturn.com/docs/2018/06/16/dialog-state-tracking-models.html" target="_blank" title="">
			<i class="fa fa-envelope-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Email</span>
		</a>
        </li>
        
    </ul>
</div>




   <!-- Tag list -->
  
  


<footer>
  <div class="tag-list"></div>
</footer>


</article>

<!-- Disqus -->


<!-- Post navigation -->

  <div id="post-nav">
    
    <div id="previous-post">
        <a alt="7) Automated Evaluation: Handling uncertainty and ambiguity in dialogue" href="/docs/2018/10/08/7-automated-evaluation-handling-uncertainty-and-ambiguity-in-dialogue.html">
            <p>Previous post</p>
            7) Automated Evaluation: Handling uncertainty and ambiguity in dialogue
        </a>
    </div>
    

    
    <div id="next-post">
        <a alt="CS224n Poster Session 2018" href="/docs/2018/03/23/cs224n-poster-session-2018.html">
            <p>Next post</p>
            CS224n Poster Session 2018
        </a>
    </div>
    
</div>



<!-- To change color of links in the page -->
<style>
  

  header#main {
    background-repeat:no-repeat;
  
  }
</style>

    </div>
    <footer class="site-footer">
    <p class="text">
        Made in San Francisco with <3
</p>
            <div class="footer-icons">
                <ul>
                <!-- Social icons from Font Awesome, if enabled -->
                
<li>
    <a feed.xml href="/docs/feed.xml"
       title="Follow RSS feed">
        <span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>















<li>
    <a href="https://github.com/sylhare" title="Follow on GitHub">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-github fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>
































                </ul>
            </div>
</footer>



  </body>
</html>
